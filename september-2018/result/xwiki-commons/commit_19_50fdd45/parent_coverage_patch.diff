diff --git a/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionSerializer.java b/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionSerializer.java
index a99e0235a..c85b303cf 100644
--- a/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionSerializer.java
+++ b/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionSerializer.java
@@ -133,12 +133,12 @@
 
     private static final String ELEMENT_EFFID = "feature";
 
+    private static final String ELEMENT_EFFVERSION = "version";
+
     private static final String ELEMENT_ALLOWEDNAMESPACES = "allowednamespaces";
 
     private static final String ELEMENT_ANNAMESPACE = "namespace";
 
-    private static final String ELEMENT_EFFVERSION = "version";
-
     private static final String ELEMENT_SCM = "scm";
 
     private static final String ELEMENT_SCONNECTION = "connection";
@@ -687,7 +687,7 @@ private void addExtensionFeatures(Document document, Element parentElement, Exte
                 featuresElement.appendChild(authorElement);
 
                 addElement(document, authorElement, ELEMENT_EFFID, feature.getId());
-                addElement(document, authorElement, ELEMENT_EFFVERSION, feature.getVersion());
+                addElement(document, authorElement, ELEMENT_EFFVERSION, feature.getVersion().getValue());
             }
         }
     }
diff --git a/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/repository/local/DefaultExtensionSerializerTest.java b/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/repository/local/DefaultExtensionSerializerTest.java
index 54f464aa5..c8b6bb00a 100644
--- a/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/repository/local/DefaultExtensionSerializerTest.java
+++ b/xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/repository/local/DefaultExtensionSerializerTest.java
@@ -139,6 +139,7 @@ public void testSerialize() throws ParserConfigurationException, TransformerExce
 
         extension.addAuthor(new DefaultExtensionAuthor("authorname", new URL("http://authorurl")));
         extension.addFeature("feature1");
+        extension.addExtensionFeature(new ExtensionId("feature2", "version"));
         extension.addAllowedNamespace("namespae1");
         extension.addLicense(new ExtensionLicense("licensename", Arrays.asList("license content")));
         dependency.setProperties(Collections.<String, Object>singletonMap("dependencykey", "dependencyvalue"));
